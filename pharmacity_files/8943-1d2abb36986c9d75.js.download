(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8943],{11813:function(e,t,r){"use strict";r.d(t,{Z:function(){return Notification_NotificationList}});var n=r(13050),a=r(55340),i=r(730),o=r(88451),l=r(57556),s=r(42249),c=r(42341),d=r(24784),Notification_NotificationItem=function(e){var t,r,u,h,m;let{data:f,hideBorder:p,onRead:x,classNames:v}=e,g=(0,d.useTranslations)();return(0,n.jsxs)("div",{className:(0,l.cn)(["grid cursor-pointer border-b border-divider p-4",p&&"border-transparent",f.is_readed?"bg-white":"bg-primary-50",null==v?void 0:v.container]),onClick:()=>x(f),children:[(0,n.jsxs)("div",{className:(0,l.cn)(["flex items-center justify-between space-x-2",null==v?void 0:v.header]),children:[(0,n.jsxs)("div",{className:"flex items-center justify-start space-x-2",children:[(0,n.jsx)(a.Z,{name:"NotificationColor"}),(0,n.jsx)("p",{className:"text-sm font-medium text-neutral-700",children:g("header.notification.title")})]}),(0,n.jsx)("p",{className:(0,l.cn)(["text-xs text-neutral-700",null==v?void 0:v.time]),children:f.pushed_at?(0,s.o)(f.pushed_at,c.n.dateTimeFormat):""})]}),(0,n.jsx)(o.Z,{size:"md",className:(0,l.cn)(["text-start font-semibold",null==v?void 0:v.title]),children:(null===(t=f.title)||void 0===t?void 0:t.vi)||f.title.en}),(0,n.jsx)(i.Z,{title:(null===(r=f.content)||void 0===r?void 0:r.vi)||(null==f?void 0:null===(u=f.content)||void 0===u?void 0:u.en),size:"sm",className:(0,l.cn)(["line-clamp-1 text-start",null==v?void 0:v.description]),children:(null===(h=f.content)||void 0===h?void 0:h.vi)||(null==f?void 0:null===(m=f.content)||void 0===m?void 0:m.en)})]})},u=r(44731),Notification_NotificationList=function(e){let{data:t,onRead:r,itemsProps:a,scrollClassName:i}=e;return(0,n.jsx)("div",{className:"grid",children:(0,n.jsx)(u.ScrollArea,{className:(0,l.cn)(["h-auto",i]),children:(0,n.jsx)("div",{className:"grid h-full overflow-hidden rounded-sm",children:null==t?void 0:t.map((e,i)=>(0,n.jsx)(Notification_NotificationItem,{hideBorder:i===t.length-1,data:e,onRead:r,...a},e.id))})})})}},666:function(e,t,r){"use strict";var n=r(13050),a=r(57556);t.Z=e=>{let{className:t,classNameContainer:r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("flex animate-pulse space-x-4",r),children:(0,n.jsx)("div",{className:(0,a.cn)("h-4 w-full rounded-sm bg-slate-200",t)})})}},10297:function(e,t,r){"use strict";r.d(t,{A:function(){return n.Z}}),r(13050);var n=r(666)},56871:function(e,t,r){"use strict";var n=r(13050),a=r(45686),i=r(32526),o=r(77430);t.Z=function(e){let{children:t,...r}=e,{popOver:l,tooltip:s,trigger:c,triggerProps:d,contentProps:u,arrowProps:h,...m}=r,{isDesktop:f}=(0,o.J)();return f?(0,n.jsx)(i.pn,{...null==s?void 0:s.providerProps,children:(0,n.jsxs)(i.u,{delayDuration:100,...m,...null==s?void 0:s.props,children:[(0,n.jsx)(i.aJ,{asChild:!0,...d,...null==s?void 0:s.triggerProps,children:(0,n.jsx)("div",{children:c})}),(0,n.jsxs)(i._v,{style:{overflow:"inherit"},...u,...null==s?void 0:s.contentProps,children:[t,(0,n.jsx)(i.Ce,{...h,...null==s?void 0:s.arrowProps})]})]})}):(0,n.jsxs)(a.J2,{...m,...null==l?void 0:l.props,children:[(0,n.jsx)(a.xo,{asChild:!0,...d,...null==l?void 0:l.triggerProps,children:(0,n.jsx)("div",{children:c})}),(0,n.jsxs)(a.yk,{...u,...null==l?void 0:l.contentProps,children:[t,(0,n.jsx)(a.QH,{...h,...null==l?void 0:l.arrowProps})]})]})}},49360:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Navbar_Notification}});var n=r(13050),a=r(26074),i=r(55340),o=r(10297),l=r(60787),s=r(47063),Notification_NotificationLink=function(e){let{children:t}=e;return(0,n.jsx)(l.Z,{href:s.d,children:t})},c=r(56871),d=r(83241),u=r(47850),h=r(72295),m=r(88451),f=r(24784),Notification_NotificationHeader=function(e){let{disabled:t,onReadAll:r,onClose:o}=e,l=(0,f.useTranslations)();return(0,n.jsxs)("div",{className:"flex items-center justify-between px-2 py-2 pe-4 md:px-4",children:[(0,n.jsxs)("div",{className:"contents items-center justify-start space-x-1",children:[(0,n.jsx)(a.default,{onClick:o,type:"button",shape:"link",className:"h-6 p-0 text-neutral-900 md:hidden",children:(0,n.jsx)(i.Z,{name:"BackOutline",size:"md",className:"text-neutral-900"})}),(0,n.jsx)(m.Z,{size:"md",className:"hidden md:block",children:l("header.notification.news")}),(0,n.jsx)(m.Z,{size:"md",className:"block ps-12 md:hidden md:ps-0",children:l("header.notification.title")})]}),r&&(0,n.jsx)(h.Z,{disabled:t,onClick:r,children:l("header.notification.readAll")})]})},p=r(11813),x=r(12083),v=r(72421),g=r(87136),b=r(79964),y=r(33599),N=r(88899),j=r(83820),S=r(66505),Notification_NotificationContent=function(e){var t;let{onClose:r,reloadTotal:i}=e,o=(0,N.LP)(),{open:l}=(0,y.EJ)(),s=(0,f.useTranslations)(),c=(0,S.useRouter)(),{data:h}=(0,v.F)(!!o,{params:{is_get_all:1,page:1,page_size:10}},{use:[b.Q]}),m=(null==h?void 0:null===(t=h.responseData)||void 0===t?void 0:t.data)||[],{trigger:C,isMutating:w}=(0,g.S)({onSuccess:()=>{i(),r()}});return o?(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsxs)("div",{className:"pt-2 md:w-[380px]",children:[(0,n.jsx)(Notification_NotificationHeader,{onClose:r,disabled:(null==m?void 0:m.length)===0||w,onReadAll:()=>C()}),h||0!==m.length?(null==m?void 0:m.length)===0?(0,n.jsx)(d.Z,{iconUrl:"/images/empty-data/empty-notification.svg",iconClassName:"mb-0 w-[calc(100rem/16)] h-[calc(100rem/16)]",className:"items-center p-0 pb-4",description:(0,n.jsx)("span",{children:s("header.notification.empty.title")}),extra:s("header.notification.empty.title")}):(0,n.jsx)(p.Z,{data:m||[],onRead:e=>{var t;1!==e.is_readed&&C({params:{id:e.id}}),r();let n=null===(t=e.data)||void 0===t?void 0:t.action_web_url,a=(0,j.j)(e);a&&(n="".concat(x.LO,"/").concat(a)),n&&c.push(n)},scrollClassName:"max-h-[502px]"}):(0,n.jsx)("div",{className:"flex h-[200px] items-center justify-center p-4",children:(0,n.jsx)(u.H,{})})]}),m.length>0&&o&&(0,n.jsx)("div",{className:"flex items-center justify-center py-2",children:(0,n.jsx)(a.default,{shape:"link",href:"/account/notifications",className:"md:w-[256px]",children:s("header.notification.viewAll")})})]}):(0,n.jsx)("div",{className:"grid",children:(0,n.jsxs)("div",{className:"pt-2 md:w-[380px]",children:[(0,n.jsx)(Notification_NotificationHeader,{onClose:r,disabled:(null==m?void 0:m.length)===0||w}),(0,n.jsx)(d.Z,{iconUrl:"/images/empty-data/empty-notification.svg",iconClassName:"mb-0 w-[calc(100rem/16)] h-[calc(100rem/16)]",className:"items-center p-0 pb-4",description:(0,n.jsx)("span",{children:s("header.notification.notLogin.title")}),extra:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,n.jsx)("p",{children:s("header.notification.notLogin.letLogin")}),(0,n.jsx)(a.default,{onClick:()=>{l(),r()},className:"w-fit",children:s("header.notification.notLogin.login")})]})})]})})},C=r(8434),NotificationTooltipPopover=function(e){let{children:t,...r}=e,[a,i]=(0,C.useState)(!1);return(0,n.jsx)(c.Z,{trigger:t,open:a,onOpenChange:i,contentProps:{avoidCollisions:!1,align:"start",alignOffset:-128,side:"bottom",className:"rounded-md justify-start p-0 border-none"},tooltip:{props:{delayDuration:100,disableHoverableContent:!1},arrowProps:{filter:"white",fill:"white",width:12,height:8}},popOver:{contentProps:{className:"md:w-[416px]"},arrowProps:{width:12,height:5,fill:"white"}},children:a&&(0,n.jsx)(Notification_NotificationContent,{onClose:()=>i(!1),...r})})},w=r(77430),Notification_NotificationWrapper=function(e){let{children:t,...r}=e,{isDesktop:a}=(0,w.J)(),i=a?NotificationTooltipPopover:Notification_NotificationLink;return(0,n.jsx)(i,{...r,children:t})},k=r(4045),_=r(36637);let useGetCountNotification=(e,t)=>{let r=(0,k.G)(e?{key:"notificationGetCount",payload:t.params}:null,_.Lv);return r};var L=r(80225),Navbar_Notification=function(){var e,t;let r=(0,N.LP)(),l=(0,S.useRouter)(),{onCheckLogin:c}=(0,L.R)({onUserLoggedIn:()=>l.push(s.d)}),{data:d,isLoading:u,mutate:h}=useGetCountNotification(!!r,{params:{unread:1}});return u?(0,n.jsx)(o.A,{classNameContainer:"md:inline-flex",className:"h-9 w-9 rounded-full"}):(0,n.jsx)(Notification_NotificationWrapper,{reloadTotal:h,children:(0,n.jsxs)(a.default,{onClick:c,shape:"circle",color:"light",className:"relative border-0 md:!h-10 md:!w-10 md:bg-transparent md:text-white hover:md:bg-transparent hover:md:text-white focus:md:text-white",children:[(0,n.jsx)(i.Z,{size:"md",name:"NotificationOutline"}),r&&((null==d?void 0:null===(e=d.responseData)||void 0===e?void 0:e.count)||0)>0&&(0,n.jsx)("div",{className:"absolute -right-0.5 top-0 inline-flex h-[18px] min-w-[18px] items-center justify-center rounded-full border border-white bg-orange-500 px-1 text-xs font-bold text-white dark:border-neutral-900 md:right-0 md:h-5 md:min-w-[20px]",children:null==d?void 0:null===(t=d.responseData)||void 0===t?void 0:t.count})]})})}},57754:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Search_SearchBoxClient}});var n=r(13050),a=r(26074),i=r(55340),o=r(19407),l=r(57556),s=r(23508),c=r(60787),SearchCombobox_SearchAds=function(e){let{title:t,banner:r}=e;return(0,n.jsxs)("div",{className:(0,l.cn)(["grid grid-flow-col items-center justify-between gap-3 pt-5 md:pt-0"]),children:[(0,n.jsx)("p",{title:t,className:(0,l.cn)(["truncate text-base font-bold text-neutral-900"]),children:t}),(0,n.jsx)("div",{className:(0,l.cn)(["relative rounded","h-[calc(40rem/16)] w-[calc(140rem/16)] md:w-[calc(142rem/16)]"]),children:(null==r?void 0:r.imageDesktopVi)?(0,n.jsx)(c.Z,{href:null==r?void 0:r.hyperlink,children:(0,n.jsx)(s.default,{sources:[{media:"(max-width:767px)",srcSet:null==r?void 0:r.imageAppVi}],src:r.imageDesktopVi,alt:"banner image",className:"h-[calc(40rem/16)] w-full cursor-pointer rounded object-cover md:w-[calc(142rem/16)]",fill:!0,sizes:"(max-width: 768px) 24rem, 24rem"})}):null})]})},d=r(8434);let u=(0,d.createContext)({}),useSearchBoxContext=()=>(0,d.useContext)(u);var SearchCombobox_SearchBoxContext=e=>{let{children:t,data:r}=e;return(0,n.jsx)(u.Provider,{value:{data:r},children:t})},SearchCombobox_SearchDivider=function(){return(0,n.jsx)("div",{className:"h-[1px] w-full bg-divider"})},h=r(54544),m=r(88452),f=r.n(m);let getSearchKeywordStringify=e=>f().stringify({keyword:e});var p=r(24784),x=r(66505),SearchCombobox_SearchHistory=function(e){let{bottomScrollRef:t,data:r,haveLoadMore:o,useArrow:s,onSelect:d,onClearAllHistory:u,onLoadMore:m}=e,f=(0,p.useTranslations)(),v=(0,x.useRouter)(),handleClick=e=>()=>d(e),onPressEnter=e=>t=>{"Enter"===t.key&&(d(e),v.push("/search?".concat(getSearchKeywordStringify(e))))},handleSelect=e=>{s&&(d(e),v.push("/search?".concat(getSearchKeywordStringify(e))))};return r.length?(0,n.jsxs)("div",{className:"grid gap-4 md:gap-3",children:[(0,n.jsxs)("div",{className:(0,l.cn)(["grid grid-flow-col items-center justify-between gap-2 px-2"]),children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-neutral-900",children:f("header.searchBox.history.searchHistory")}),(0,n.jsx)(a.default,{onClick:u,shape:"link",className:"items-center p-0 text-primary-500 hover:text-primary-600",children:f("header.searchBox.history.clearAll")})]}),(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)(h.fu,{className:(0,l.cn)(["p-1","[&>div]:grid [&>div]:gap-2"]),children:r.map((e,t)=>(0,n.jsx)(c.Z,{href:"/search?".concat(getSearchKeywordStringify(e)),className:(0,l.cn)(["focus-visible:outline-none  [&>div]:focus-visible:!bg-primary-50 md:[&>div]:even:bg-neutral-100",!s&&"hover:[&>div]:!bg-primary-50"]),onClick:handleClick(e),onKeyDown:onPressEnter(e),children:(0,n.jsxs)(h.di,{value:e,onSelect:handleSelect,className:(0,l.cn)(["grid cursor-pointer grid-cols-[calc(16rem/16),1fr] items-center justify-start gap-2 rounded-sm py-[calc(6rem/16)] pe-2 ps-0  aria-selected:bg-[inherit] md:grid-cols-[calc(20rem/16),1fr] md:p-2 ",s&&"aria-selected:text-neutral-900 md:aria-selected:!bg-primary-50"]),children:[(0,n.jsx)(i.Z,{name:"HistoryOutline",className:"h-4 w-4 items-center md:h-5 md:w-5"}),(0,n.jsx)("p",{className:"truncate text-sm font-normal text-neutral-900",children:e})]})},t))}),(0,n.jsx)("div",{ref:t}),o?(0,n.jsx)(a.default,{onClick:m,shape:"link",className:(0,l.cn)(["h-[calc(36rem/16)] w-full items-center justify-self-center px-4 py-[calc(6rem/16)] pt-2 md:w-[calc(256rem/16)]","md:border-0 md:text-primary-500 md:hover:text-primary-600","rounded-lg border border-neutral-600 text-neutral-700"]),children:f("header.searchBox.history.loadMore")}):null]})]}):null},v=r(38786);let g=(0,v.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)(g({variant:r}),t),...a})}var b=r(95060),SearchCombobox_SearchPopular=function(e){let{onSelect:t,className:r}=e,a=(0,p.useTranslations)(),{data:{trendingKey:i}}=useSearchBoxContext(),handleSelect=e=>()=>t(e.link?void 0:e.name);return(0,n.jsxs)("div",{className:(0,l.cn)(["grid pt-4",r]),children:[(0,n.jsx)("p",{className:"px-1 text-sm font-semibold text-neutral-900",children:a("header.searchBox.popular")}),(0,n.jsx)("div",{className:(0,l.cn)(["flex max-h-[calc(142rem/16)] flex-wrap overflow-hidden py-1 md:px-1"]),children:null==i?void 0:i.slice(0,b.WJ).map((e,t)=>{var r;return(0,n.jsx)(c.Z,{className:"me-3 mt-3 last:me-0",href:null!==(r=e.link)&&void 0!==r?r:"/search?".concat(getSearchKeywordStringify(e.name)),onClick:handleSelect(e),children:(0,n.jsx)(Badge,{className:(0,l.cn)(["border-primary-500 bg-neutral-50 px-2 py-1.5 text-sm text-primary-500 hover:bg-primary-50"]),children:e.name})},e.id+t)})})]})},y=r(44731),SearchCombobox_SearchResult=function(e){let{data:t=[],useArrow:r,onSelect:a}=e,o=(0,x.useRouter)(),handleClick=()=>a(),onPressEnter=e=>t=>{"Enter"===t.key&&(a(),o.push("/product/".concat(e)))},handleSelect=e=>()=>{r&&(a(),o.push("/product/".concat(e)))};return(0,n.jsx)(y.ScrollArea,{className:"h-full md:max-h-[calc(440rem/16)]",children:(0,n.jsx)(h.fu,{className:(0,l.cn)(["p-1","[&>div]:grid [&>div]:gap-2"]),children:t.map((e,t)=>{var a;return(0,n.jsx)(c.Z,{href:"/product/".concat(e.slug),onClick:handleClick,onKeyDown:onPressEnter(e.slug),className:(0,l.cn)(["focus-visible:bg-primary-50 focus-visible:outline-none",!r&&"hover:[&>div]:!bg-primary-50"]),children:(0,n.jsxs)(h.di,{value:e.sku,onSelect:handleSelect(e.slug),className:(0,l.cn)(["grid cursor-pointer grid-cols-[calc(20rem/16),1fr] gap-2 rounded-sm bg-transparent py-[calc(6rem/16)] pe-2 ps-0  aria-selected:bg-[inherit] md:grid-flow-col md:grid-cols-1 md:p-2",r&&"aria-selected:text-neutral-900 md:aria-selected:!bg-primary-50"]),children:[(0,n.jsx)(i.Z,{name:"SearchOutline",className:"h-4 w-4 items-center md:hidden"}),(0,n.jsx)("p",{className:"line-clamp-2 text-sm font-semibold text-neutral-900 md:font-normal",dangerouslySetInnerHTML:{__html:getFormatTitle(null==e?void 0:null===(a=e.highlight)||void 0===a?void 0:a.find(e=>e.includes(b.Ln)&&e.includes(b.jH)))||(null==e?void 0:e.name)||""}})]})},e.slug+t)})})})};let getFormatTitle=e=>e?e.replaceAll(b.Ln,'<span class="font-bold text-primary-500">').replaceAll(b.jH," </span>"):void 0;var N=r(4045),j=r(17576);let useProductSearchSuggest=e=>{let t=(0,N.G)(e.keyword?{key:"productSearchSuggest",params:e}:null,j.Fq);return t};var S=r(3943);let useCacheSearchHistory=e=>{let{maxItem:t,maxShowItem:r,lsKey:n,version:a}=e,[i,o]=(0,d.useState)(!1),[l,s]=(0,d.useState)([]),[c,u]=(0,d.useState)([]),h=(0,d.useCallback)(()=>{o(e=>!e)},[]),m=(0,d.useCallback)(()=>{let e=(0,S.X)(n);if(e.version!==a){localStorage.removeItem(n);return}return e.values},[n,a]),f=(0,d.useCallback)(e=>{if(!e.trim())return;let r=m()||[],i=r.find(t=>t===e)?[e,...r.filter(t=>t!==e)]:[e,...r];i.length>t&&i.pop(),(0,S.s)(n,{version:a,values:i}),s(r=>{let n=r.find(t=>t===e)?[e,...r.filter(t=>t!==e)]:[e,...r];return n.length>t&&n.pop(),n})},[m,n,t,a]),p=(0,d.useCallback)(()=>{(0,S.removeItem)(n),s([]),u([])},[n]),x=(0,d.useCallback)(()=>{let e=m();e&&(s(e.slice(0,r)),u(e))},[m,r]);return(0,d.useEffect)(()=>{x()},[x,i]),(0,d.useEffect)(()=>{let callbackRef=e=>{e.key===n&&x()};return window.addEventListener("storage",callbackRef),()=>window.removeEventListener("storage",callbackRef)},[x,n]),{histories:l,haveLoadMore:l.length<c.length,reloadHistories:h,addHistoryItem:f,clearHistories:p,loadMoreHistories:()=>{let e=l.length,t=c.length;e>=t||s(t=>[...t,...c.slice(e,e+r)||[]])}}};var C=r(60446),w=r(12751),SearchCombobox_SearchContent=function(e){let{search:t,styles:r,useArrow:a,onChangeSearch:i,onOpenChange:o}=e,s=(0,d.useRef)(null),[c,u]=(0,d.useState)([]),{data:{banner:h}}=useSearchBoxContext(),m=(0,d.useMemo)(()=>(0,w.r)(null==h?void 0:h.ruleDetails),[h]),f=(0,C.Z)(t,300),{data:p,error:x,isLoading:v}=useProductSearchSuggest({keyword:f,limit:10,index:1,refresh:!0}),{histories:g,haveLoadMore:N,addHistoryItem:j,clearHistories:S,loadMoreHistories:k}=useCacheSearchHistory({lsKey:b.oy,version:b.S1,maxItem:b.qz,maxShowItem:b.Zw}),handleAddHistory=e=>{j(e)},onSelect=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];null==o||o(!1),e&&(i(e),t&&handleAddHistory(e))};return(0,d.useLayoutEffect)(()=>{var e,t;if(x){u([]);return}(null==p?void 0:p.responseData)&&u((null==p?void 0:null===(t=p.responseData)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.items)||[])},[x,v,p]),(0,n.jsxs)("div",{className:(0,l.cn)(["grid gap-4 bg-white",null==r?void 0:r.className]),children:[!t&&h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(SearchCombobox_SearchAds,{title:h.name,banner:m}),(0,n.jsx)(SearchCombobox_SearchDivider,{})]}):null,(0,n.jsx)("div",{className:"grid gap-4",children:(0,n.jsxs)(y.ScrollArea,{className:null==r?void 0:r.scrollClassName,children:[t&&f?c.length?(0,n.jsx)(SearchCombobox_SearchResult,{data:c,onSelect:onSelect,useArrow:a}):null:g.length?(0,n.jsx)(SearchCombobox_SearchHistory,{bottomScrollRef:s,data:g,haveLoadMore:N,useArrow:a,onSelect:onSelect,onClearAllHistory:()=>{S()},onLoadMore:()=>{k(),s.current&&s.current.scrollIntoView({behavior:"smooth"})}}):null,(t&&f?c.length:g.length)?(0,n.jsx)(SearchCombobox_SearchDivider,{}):null,(0,n.jsx)(SearchCombobox_SearchPopular,{className:(0,l.cn)([t&&f&&0===c.length?"pt-4":""]),onSelect:onSelect})]})})]})},k=r(45686),_=r(77430);r(66691);var Navbar_SearchCombobox=function(e){let{children:t,...r}=e,{search:s,onChangeSearch:c,onSearch:u,onPressEnter:m,...f}=r,p=(0,d.useRef)(null),x=(0,d.useRef)(null),v=(0,d.useRef)(null),[g,y]=(0,d.useState)(!1),{isTablet:N,isMobile:j}=(0,_.J)(),{addHistoryItem:S}=useCacheSearchHistory({lsKey:b.oy,version:b.S1,maxItem:b.qz,maxShowItem:b.Zw}),handleAddHistory=e=>{S(e)};return(0,n.jsxs)(k.J2,{...f,children:[(0,n.jsx)(k.xo,{asChild:!0,ref:p,children:t}),(0,n.jsx)(k.yk,{side:"bottom",sideOffset:-40,ref:e=>{e&&p.current&&(e.style.width=N||j?"100vw":"".concat(p.current.offsetWidth+24,"px"))},className:(0,l.cn)(["border-0 bg-transparent p-0 shadow-lg shadow-[inherit]","data-[state=closed]:!zoom-out-100 data-[state=open]:!zoom-in-100 data-[side=bottom]:!slide-in-from-top-0"]),onPointerDownOutside:()=>y(!1),children:(0,n.jsxs)(h.mY,{className:"bg-transparent",children:[(0,n.jsxs)("div",{className:"relative mx-3 mb-2 text-neutral-600",children:[(0,n.jsx)(a.default,{type:"button",shape:"link",className:"absolute left-0 top-0 z-10 h-10 px-2 py-[10px] text-neutral-900",onClick:()=>{var e;null==f||null===(e=f.onOpenChange)||void 0===e||e.call(f,!1),u(),handleAddHistory(s)},children:(0,n.jsx)(i.Z,{name:"SearchOutline"})}),(0,n.jsx)(o.Z,{ref:x,type:"text",value:s,size:"md",onChange:c,onPressEnter:()=>{m(),handleAddHistory(s)},onKeyDown:e=>{if("ArrowDown"===e.key){var t;e.currentTarget.blur(),null==v||null===(t=v.current)||void 0===t||t.focus(),y(!0)}},onFocus:()=>y(!1),className:"search-input h-10 rounded-sm border-0 py-1 pl-10 text-sm font-medium placeholder:text-primary-500 focus-visible:placeholder:opacity-0",autoFocus:!0,suffix:s&&(0,n.jsx)(a.default,{onClick:()=>c(""),className:"h-4 p-0",shape:"icon",children:(0,n.jsx)(i.Z,{name:"CircleCloseFill",size:"sm"})})}),(0,n.jsx)("input",{ref:v,className:"absolute -z-10 opacity-0"})]}),(0,n.jsx)(SearchCombobox_SearchContent,{search:s,onOpenChange:null==r?void 0:r.onOpenChange,onChangeSearch:c,onResetSearch:()=>{c(""),x.current&&x.current.focus()},useArrow:g,styles:{scrollClassName:"-me-2 grid h-full max-h-[calc(100vh-210px)] gap-4 pe-2",className:"mx-3 mb-3  rounded p-5 shadow-lg"}})]})})]})},L=r(88882),R=r(7611),SearchCombobox_SearchDialogMobile=function(e){let{children:t,...r}=e,{search:s,onChangeSearch:c,onPressEnter:u,keywordHolder:m,searchInputClassName:f,...p}=r,x=(0,d.useRef)(null),{addHistoryItem:v}=useCacheSearchHistory({lsKey:b.oy,version:b.S1,maxItem:b.qz,maxShowItem:b.Zw}),handleAddHistory=e=>{v(e)},onResetSearch=()=>{c(""),x.current&&x.current.focus()};return(0,n.jsxs)(L.Vq,{...p,children:[(0,n.jsx)(L.hg,{asChild:!0,children:t}),(0,n.jsxs)(L.cZ,{className:(0,l.cn)(["data-[state=closed]:slide-out-from-top-full fixed inset-0 z-50 grid h-[100dvh] w-full content-start gap-4 bg-white px-4 py-4 shadow-lg duration-100 data-[state=closed]:animate-moveToRight data-[state=open]:animate-moveToLeft "]),onPointerDownOutside:e=>e.preventDefault(),children:[(0,n.jsxs)(h.mY,{className:"bg-transparent",children:[(0,n.jsxs)("div",{className:"grid grid-cols-[24px,1fr] items-center justify-start gap-4 py-1",children:[(0,n.jsx)(R.GG,{asChild:!0,children:(0,n.jsx)("div",{children:(0,n.jsx)(a.default,{type:"button",shape:"link",className:"h-6 p-0 text-neutral-900",children:(0,n.jsx)(i.Z,{name:"BackOutline",size:"md"})})})}),(0,n.jsx)("div",{className:"grid grid-cols-1 items-center justify-start rounded-sm border border-neutral-200 px-3 py-2 text-neutral-600",children:(0,n.jsx)(o.Z,{id:"search-input-mobile",ref:x,type:"text",value:s,size:"md",onChange:c,onPressEnter:()=>{u(),handleAddHistory(s)},className:(0,l.cn)(["search-input h-5 border-0 px-1 py-0 text-sm font-medium placeholder:text-primary-500 focus-visible:placeholder:opacity-0",f]),autoFocus:!0,suffixClassName:"p-0",placeholder:m,suffix:s&&(0,n.jsx)(a.default,{onClick:()=>c(""),className:"h-4 p-0",shape:"icon",children:(0,n.jsx)(i.Z,{name:"CircleCloseFill",size:"sm"})})})})]}),(0,n.jsx)(SearchCombobox_SearchContent,{search:s,onOpenChange:null==p?void 0:p.onOpenChange,onChangeSearch:c,onResetSearch:onResetSearch,styles:{scrollClassName:(0,l.cn)(["h-full",s?"max-h-[calc(100vh-90px)]":"max-h-[calc(100vh-168px)]"])}})]}),(0,n.jsx)("button",{id:b.Ur,onClick:onResetSearch,className:"absolute hidden opacity-0"})]})]})},P=r(43091),SearchCombobox_SearchTrigger=function(e){let{searchText:t,keywordHolder:r,className:o}=e;return(0,n.jsxs)("div",{className:"relative text-neutral-600",children:[(0,n.jsx)(a.default,{type:"button",shape:"link",className:"absolute left-0 top-0 z-10 h-10 px-2 py-[10px] text-neutral-900",children:(0,n.jsx)(i.Z,{name:"SearchOutline"})}),(0,n.jsx)("div",{className:(0,l.cn)([P.P.base,P.P.size.md,"search-input flex h-10 items-center justify-start rounded-sm border-0 bg-white py-1 pl-10 text-start text-sm font-medium",o,t&&"text-neutral-900"]),children:(0,n.jsx)("span",{className:"truncate",children:t||r})})]})},Z=r(62971),Search_SearchBox=e=>{let{keywordHolder:t,trendingKey:r,banner:a,trigger:i,className:o="",searchTriggerClassName:s,searchInputClassName:u}=e,h=(0,x.useRouter)(),m=(0,x.useSearchParams)(),f=m.get("keyword")||"",[p,v]=(0,d.useState)(f),[g,b]=(0,d.useState)(!1),{isTablet:y,isMobile:N}=(0,_.J)(),handleSearch=()=>{p.trim()&&h.push("/search?".concat(getSearchKeywordStringify(p)))},handlePressEnter=()=>{handleSearch(),b(!1)},onChangeSearch=e=>{v(e)},handleShowMobileHeader=()=>{let e=document.querySelector("#mainNav"),t=document.querySelector("#mainContainer"),r=(null==t?void 0:t.getBoundingClientRect().top)||0;r<=1?null==e||e.classList.add("fixed-top"):null==e||e.classList.remove("fixed-top")},j=(0,d.useCallback)(()=>{v(f)},[f]);return(0,d.useEffect)(()=>(window.addEventListener("scroll",handleShowMobileHeader),window.addEventListener("resize",handleShowMobileHeader),()=>{window.removeEventListener("scroll",handleShowMobileHeader),window.removeEventListener("resize",handleShowMobileHeader)}),[]),(0,d.useEffect)(()=>{j()},[j]),(0,n.jsx)(SearchCombobox_SearchBoxContext,{data:{keywordHolder:t,trendingKey:r,banner:a},children:(0,n.jsxs)("div",{className:(0,l.cn)("mx-auto w-full",o),children:[y||N?(0,n.jsx)(SearchCombobox_SearchDialogMobile,{open:g,onOpenChange:b,search:p,keywordHolder:t,searchInputClassName:u,onChangeSearch:onChangeSearch,onPressEnter:handlePressEnter,children:(0,n.jsx)("div",{children:i||(0,n.jsx)(SearchCombobox_SearchTrigger,{searchText:p,keywordHolder:t,className:s})})}):(0,n.jsx)(Navbar_SearchCombobox,{open:g,onOpenChange:b,search:p,onChangeSearch:onChangeSearch,onSearch:handleSearch,onPressEnter:handlePressEnter,children:(0,n.jsx)("div",{children:i||(0,n.jsx)(SearchCombobox_SearchTrigger,{searchText:p,keywordHolder:t,className:s})})}),(0,n.jsx)("div",{className:"mt-[3px] line-clamp-1 hidden h-5 flex-wrap space-x-3 text-xs text-white md:flex",children:null==r?void 0:r.map(e=>{var t;return(0,n.jsx)("div",{className:"h-5",children:(0,n.jsx)(c.Z,{href:null!==(t=e.link)&&void 0!==t?t:"/search?".concat(getSearchKeywordStringify(e.name)),children:(0,n.jsx)(Z.Z,{size:"body",children:e.name})})},e.id)})})]})})},H=r(96937),E=r(54523),O=r(82710),A=r(23397);let useAppConfigVersion=(e,t,r)=>(0,N.G)({key:"commonAppConfigWithVersion"},()=>(0,A.CQ)({params:{version:e,payload:t,qsStringifyOptions:r}}),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});var D=r(43477),z=r(58724),B=r(98402),I=r(20811),Search_SearchBoxClient=function(e){var t,r,a;let i=(0,p.useLocale)(),o=(0,H.G3)(i),{user:s}=(0,z.L)(),c=(0,p.useTranslations)(),{data:u}=(0,D.O)({platform:"web"}),{data:h}=useAppConfigVersion(E.IM,{keys:[E.SS.homeKeywordHolder],is_active:!0},{encodeValuesOnly:!0,arrayFormat:"brackets"}),m=getKeywordHolderValue((null==h?void 0:null===(t=h.responseData)||void 0===t?void 0:t.data)||[],o),f=(0,d.useMemo)(()=>s?c("header.searchBox.placeholder.haveLogging",{name:s.full_name,gender:1===s.gender?c("header.searchBox.placeholder.male"):2===s.gender?c("header.searchBox.placeholder.female"):""}):c("header.searchBox.placeholder.default"),[c,s]);return(0,n.jsx)(Search_SearchBox,{keywordHolder:m.value||f,banner:null===(r=(0,w.X)((null==u?void 0:null===(a=u.responseData)||void 0===a?void 0:a.data)||[],O.s,"bannerSearch","startDate","dateFormatFull"))||void 0===r?void 0:r[0],searchTriggerClassName:(0,l.cn)(["brand"===m.type?"text-primary-500":"text-neutral-700"]),searchInputClassName:(0,l.cn)(["brand"===m.type?"placeholder:text-primary-500 ":"placeholder:text-neutral-700"]),...e})};let getKeywordHolderValue=(e,t)=>{let r=(0,B.H)(e,"homeKeywordHolder"),n=null==r?void 0:r.value;if(!n)return{value:"",type:""};let a=n.brand,i="vi"===t?null==a?void 0:a.name:null==a?void 0:a.nameEn;if(i&&(0,I.Ug)((0,I._l)(),a.startTime,a.endTime,"dateBase"))return{value:i,type:"brand"};let o=n.placeholder,l="vi"===t?null==o?void 0:o.name:null==o?void 0:o.nameEn;return l&&(0,I.Ug)((0,I._l)(),o.startTime,o.endTime,"dateBase")?{value:l,type:"placeholder"}:{value:"",type:""}}},54544:function(e,t,r){"use strict";r.d(t,{AZ:function(){return h},di:function(){return v},fu:function(){return p},mY:function(){return d},rb:function(){return f},sZ:function(){return u}});var n=r(13050),a=r(18343),i=r(53972),o=r(24191),l=r(8434),s=r(55340);r(88882);var c=r(57556);let d=l.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.mY,{ref:t,className:(0,c.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...i})});d.displayName=a.mY.displayName;let u=l.forwardRef((e,t)=>{let{className:r,...s}=e,[d,u]=l.useState("");return l.useEffect(()=>{u(s.value||"")},[s.value]),(0,n.jsxs)("div",{className:"flex items-center justify-start rounded-lg border border-neutral-500 bg-transparent  px-3 text-left text-base font-semibold text-neutral-900 outline-none placeholder:text-neutral-600 focus-within:border-neutral-700 focus-within:ring-neutral-500 hover:bg-transparent","cmdk-input-wrapper":"",children:[(0,n.jsx)(a.mY.Input,{ref:t,className:(0,c.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-base font-semibold outline-none placeholder:text-muted-foreground placeholder:text-neutral-600 disabled:cursor-not-allowed disabled:opacity-50",r),...s}),d?(0,n.jsx)(o.Z,{onClick:()=>{var e;u(""),null===(e=s.onValueChange)||void 0===e||e.call(s,"")},className:"ml-2 h-4 w-4 shrink-0 text-neutral-900 opacity-50"}):(0,n.jsx)(i.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})});u.displayName=a.mY.Input.displayName;let h=l.forwardRef((e,t)=>{let{className:r,...i}=e,[d,u]=l.useState("");return l.useEffect(()=>{u(i.value||"")},[i.value]),(0,n.jsxs)("div",{className:"relative flex items-center justify-start rounded-lg border border-neutral-500 bg-transparent px-3  ps-11 text-left text-base font-semibold text-neutral-900 outline-none placeholder:text-neutral-600 focus-within:border-neutral-700 focus-within:ring-neutral-500 hover:bg-transparent","cmdk-input-wrapper":"",children:[(0,n.jsx)("div",{className:"absolute left-0 top-0 flex h-full flex-col justify-center px-2 py-[10px] text-neutral-900",children:(0,n.jsx)(s.Z,{name:"SearchOutline",size:"sm"})}),(0,n.jsx)(a.mY.Input,{ref:t,className:(0,c.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-base font-semibold outline-none placeholder:text-muted-foreground placeholder:text-neutral-600 disabled:cursor-not-allowed disabled:opacity-50",r),...i}),!!d&&(0,n.jsx)(o.Z,{onClick:()=>{var e;u(""),null===(e=i.onValueChange)||void 0===e||e.call(i,"")},className:"ml-2 h-4 w-4 shrink-0 text-neutral-900 opacity-50"})]})});h.displayName=a.mY.Input.displayName;let m=l.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.mY.List,{ref:t,className:(0,c.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...i})});m.displayName=a.mY.List.displayName;let f=l.forwardRef((e,t)=>(0,n.jsx)(a.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));f.displayName=a.mY.Empty.displayName;let p=l.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.mY.Group,{ref:t,className:(0,c.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...i})});p.displayName=a.mY.Group.displayName;let x=l.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.mY.Separator,{ref:t,className:(0,c.cn)("-mx-1 h-px bg-border",r),...i})});x.displayName=a.mY.Separator.displayName;let v=l.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.mY.Item,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i})});v.displayName=a.mY.Item.displayName},45686:function(e,t,r){"use strict";r.d(t,{J2:function(){return l},QH:function(){return c},xo:function(){return s},yk:function(){return d}});var n=r(13050),a=r(8434),i=r(91517),o=r(57556);let l=i.fC,s=i.xz,c=i.Eh,d=a.forwardRef((e,t)=>{let{className:r,align:l="center",sideOffset:s=4,usePortal:c=!0,...d}=e,u=c?i.h_:a.Fragment;return(0,n.jsx)(u,{children:(0,n.jsx)(i.VY,{ref:t,align:l,sideOffset:s,className:(0,o.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...d})})});d.displayName=i.VY.displayName},47063:function(e,t,r){"use strict";r.d(t,{R:function(){return a},d:function(){return n}});let n="/account/notifications",a={title:"Th\xf4ng b\xe1o của t\xf4i",iconDesktop:"NotificationOutline",iconMobile:"NotificationOutline",url:n,isShow:!0}},12083:function(e,t,r){"use strict";r.d(t,{LO:function(){return n},Qm:function(){return s},SN:function(){return l},ZI:function(){return a},mv:function(){return o},nw:function(){return i}});let n="/account/order-history",a="online",i="offline",o={processing:{title:"Đang xử l\xfd",keyCounter:"processing",statusList:["Pending approve","Shipped to store","Approved","Partial Ship","Shipped To WH","Picked","Pending to Cancel"],statusCodeList:["pending_approve","shipped_to_store","approved","partial_ship","shipped_to_wh","picked","pending_to_cancel"]},packed:{title:"Đ\xe3 đ\xf3ng g\xf3i",keyCounter:"packed",statusList:["Packed"],statusCodeList:["packed"]},shipped:{title:"Đang vận chuyển ",keyCounter:"shipped",statusList:["Shipped","Fail delivery"],statusCodeList:["shipped","fail_delivery"]},delivered:{title:"Đ\xe3 giao h\xe0ng",keyCounter:"delivered",statusList:["Delivered"],statusCodeList:["delivered"]},cancelled:{title:"Đ\xe3 hủy",keyCounter:"cancelled",statusList:["Canceled","Pending to refund"],statusCodeList:["canceled","pending_to_refund"]}},l=Object.keys(o).map(e=>({label:o[e].title,value:e})),s={title:"Lịch sử đơn h\xe0ng",iconDesktop:"HistoryOnlineOutline",iconMobile:"HistoryOnlineOutline",url:n,isShow:!0}},54523:function(e,t,r){"use strict";r.d(t,{IM:function(){return a},SS:function(){return l},qz:function(){return o},rb:function(){return i}});var n=r(27978);let a=n.environments.appConfigVersion;n.environments.pmcBookingCareUrl;let i=n.environments.pmcGenStoryBookingUrl;n.environments.pmcOpenAppUrl;let o=2e3,l={homeFooterAddress:"homeFooterAddress",homeFooterCertificate:"homeFooterCertificate",homeFlashSale:"homeFlashSale",rankBannerConfig:"rankBannerConfig",homeKeywordHolder:"homeKeywordHolder",pXuConfig:"pXuConfig",productConfig:"productConfig",cartPromotion:"cartPromotion",cancelordersConfig:"cancelordersConfig"}},72421:function(e,t,r){"use strict";r.d(t,{F:function(){return useGetListNotification}});var n=r(4045),a=r(36637);let useGetListNotification=(e,t,r)=>{let i=(0,n.G)(e?{key:"notificationGetList",payload:t.params}:null,a.Jo,r);return i}},87136:function(e,t,r){"use strict";r.d(t,{S:function(){return useReadNotification}});var n=r(95494),a=r(36637);let useReadNotification=e=>(0,n.y)("notificationReadNotification",async(e,t)=>{var r;return await (0,a.iG)(null==t?void 0:null===(r=t.arg)||void 0===r?void 0:r.params)},e)},95494:function(e,t,r){"use strict";r.d(t,{y:function(){return useSWRMutationPmc}});var n=r(7689);let useSWRMutationPmc=(e,t,r)=>(0,n.Z)(e,t,r)},60446:function(e,t,r){"use strict";r.d(t,{Z:function(){return useDebounceValue}});var n=r(8434);function useDebounceValue(e,t){let[r,a]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let r=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},58724:function(e,t,r){"use strict";r.d(t,{L:function(){return i}});var n=r(88899),a=r(62284);let i=(0,a.Ue)(e=>({user:null,extraCareInfo:null,token:(0,n.LP)(),setUserToken:(t,r,a)=>((0,n.mB)(t,r,a),e({token:t})),setUser:t=>t?e({user:t}):e({user:t,token:"",extraCareInfo:null}),setExtraCareInfo:t=>e({extraCareInfo:t})}))},36637:function(e,t,r){"use strict";r.d(t,{Jo:function(){return getListNotification},Lv:function(){return getCountNotification},iG:function(){return readNotification},tL:function(){return registerDevice}});var n=r(35257),a=r(47893);let registerDevice=async e=>await (0,n.w)({config:a.d.notificationRegisterDevice,payload:e}),getListNotification=async e=>{let{payload:t}=e;return await (0,n.z)({config:a.d.notificationGetList,payload:t})},getCountNotification=async e=>{let{payload:t}=e;return await (0,n.z)({config:a.d.notificationGetCount,payload:t})},readNotification=async e=>await (0,n.z)({config:a.d.notificationReadNotification,payload:e})},98402:function(e,t,r){"use strict";r.d(t,{H:function(){return getAppConfigByCode}});var n=r(54523);let getAppConfigByCode=(e,t)=>null==e?void 0:e.find(e=>e.key_code===n.SS[t])},42249:function(e,t,r){"use strict";r.d(t,{o:function(){return n.o0}});var n=r(20811);r(42341)},83820:function(e,t,r){"use strict";r.d(t,{j:function(){return getOrderIdFromNotificationContent},R:function(){return reloadNotificationCount}});var n=r(30434);let reloadNotificationCount=()=>{(0,n.JG)({key:"notificationGetCount",payload:{unread:1}})},getOrderIdFromNotificationContent=e=>{var t,r,n,a,i;if(null===(r=e.content)||void 0===r?void 0:null===(t=r.vi)||void 0===t?void 0:t.startsWith("Đơn h\xe0ng")){let t=null===(i=e.content)||void 0===i?void 0:null===(a=i.vi)||void 0===a?void 0:null===(n=a.split(" "))||void 0===n?void 0:n[2];return t}return""}},66691:function(){},7689:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(8434),a=r(30434),i=r(97439);let o=i.w6?e=>{e()}:n.startTransition,useStateWithDeps=e=>{let[,t]=(0,n.useState)({}),r=(0,n.useRef)(!1),a=(0,n.useRef)(e),o=(0,n.useRef)({data:!1,error:!1,isValidating:!1}),l=(0,n.useCallback)(e=>{let n=!1,i=a.current;for(let t in e)i[t]!==e[t]&&(i[t]=e[t],o.current[t]&&(n=!0));n&&!r.current&&t({})},[]);return(0,i.LI)(()=>(r.current=!1,()=>{r.current=!0})),[a,o.current,l]},l=(0,i.xD)(a.ZP,()=>(e,t,r={})=>{let{mutate:l}=(0,a.kY)(),s=(0,n.useRef)(e),c=(0,n.useRef)(t),d=(0,n.useRef)(r),u=(0,n.useRef)(0),[h,m,f]=useStateWithDeps({data:i.i_,error:i.i_,isMutating:!1}),p=h.current,x=(0,n.useCallback)(async(e,t)=>{var r,n;let[a,h]=(0,i.qC)(s.current);if(!c.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!a)throw Error("Can’t trigger the mutation: missing key.");let m=(0,i.PM)((0,i.PM)({populateCache:!1,throwOnError:!0},d.current),t),p=(0,i.u3)();u.current=p,f({isMutating:!0});try{let t=await l(a,c.current(h,{arg:e}),(0,i.PM)(m,{throwOnError:!0}));return u.current<=p&&(o(()=>f({data:t,isMutating:!1,error:void 0})),null==(r=m.onSuccess)||r.call(m,t,a,m)),t}catch(e){if(u.current<=p&&(o(()=>f({error:e,isMutating:!1})),null==(n=m.onError)||n.call(m,e,a,m),m.throwOnError))throw e}},[]),v=(0,n.useCallback)(()=>{u.current=(0,i.u3)(),f({data:i.i_,error:i.i_,isMutating:!1})},[]);return(0,i.LI)(()=>{s.current=e,c.current=t,d.current=r}),{trigger:x,reset:v,get data(){return m.data=!0,p.data},get error(){return m.error=!0,p.error},get isMutating(){return m.isMutating=!0,p.isMutating}}})}}]);